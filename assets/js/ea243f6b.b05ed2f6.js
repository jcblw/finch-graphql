(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{86:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var r=n(3),o=n(7),a=(n(0),n(92)),i={id:"react-ref",title:"React"},c={unversionedId:"react-ref",id:"react-ref",isDocsHomePage:!1,title:"React",description:"Overview",source:"@site/docs/react-ref.md",sourceDirName:".",slug:"/react-ref",permalink:"/docs/react-ref",editUrl:"https://github.com/jcblw/finch-graphql/edit/master/packages/finch-docs/docs/react-ref.md",version:"current",frontMatter:{id:"react-ref",title:"React"},sidebar:"someSidebar",previous:{title:"Client",permalink:"/docs/client-ref"},next:{title:"Testing Finch GraphQL",permalink:"/docs/testing"}},l=[{value:"Overview",id:"overview",children:[]},{value:"Reference",id:"reference",children:[{value:"FinchProvider",id:"finchprovider",children:[]},{value:"useQuery",id:"usequery",children:[]}]}],s={toc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"overview"},"Overview"),Object(a.b)("p",null,"This page covers some of the tools in the Finch React library. That allows you to easily hook into a Finch API from a React component."),Object(a.b)("h2",{id:"reference"},"Reference"),Object(a.b)("h3",{id:"finchprovider"},"FinchProvider"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"FinchProvider")," is a component that is used to provide the FinchClient to your React components, and all the hooks used in those components."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"import { FinchProvider } from '@finch-graphql/react';\n\nconst App = () => {\n  return (\n    <FinchProvider client={client}>\n      <MyComponent />\n    </FinchProvider>\n  );\n};\n")),Object(a.b)("h4",{id:"props"},"Props"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"client")," an instance of the FinchClient to be used by the components."),Object(a.b)("h3",{id:"usequery"},"useQuery"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"useQuery")," is a hook that allows you to easily query the Finch API from inside a React component. This hooks stores the result of the query and loading states of the query."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"import { useQuery } from '@finch-graphql/react';\n\n...\n  const { data, loading, error } = useQuery(query [, options)];\n...\n")),Object(a.b)("h4",{id:"parameters"},"Parameters"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"query")," the query to be executed."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"options")," an object that allows you to configure the behavior of the query, and also the variables."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"options.variables")," an object that contains the variables to be used in the query."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"options.skip")," if set to false, the query will not be executed, until true. ",Object(a.b)("strong",{parentName:"p"},"Defaults: false")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"options.pollInterval")," the interval in milliseconds to poll the query. If the value is 0 the query will not poll. ",Object(a.b)("strong",{parentName:"p"},"Defaults: 0")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"options.poll")," a boolean value that indicates if the query should be initially polled. This only needs to be used in conjunction with the ",Object(a.b)("inlineCode",{parentName:"p"},"pollInterval")," option if you do not want to initially poll the query."),Object(a.b)("h4",{id:"refetching"},"Refetching"),Object(a.b)("p",null,"If you need to refetch the query, you can use the ",Object(a.b)("inlineCode",{parentName:"p"},"refetch")," function returned from the ",Object(a.b)("inlineCode",{parentName:"p"},"useQuery")," hook."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"...\n  const { refetch } = useQuery(query [, options)];\n...\n")),Object(a.b)("h4",{id:"invalidation-of-cache"},"Invalidation of Cache"),Object(a.b)("p",null,"If you want to invalidate and refresh the cache of data in a query, instead of refetching you can use invalidation, which happens in the background. This is useful if you want to invalidate cache data based on some external event. A example of this is if you want to invalidate the cache when the focus of the window is returned to the browser."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"...\n  const { invalidate } = useQuery(query [, options)];\n\n  useEffect(() => {\n    const onFocus = () => invalidate(); // Invalidate the cache when the window is focused\n    window.addEventListener('focus', onFocus);\n    return () => window.removeEventListener('focus', onFocus);\n  }, [invalidate]);\n...\n")),Object(a.b)("p",null,"This is just a basic example of how you can use the ",Object(a.b)("inlineCode",{parentName:"p"},"invalidate")," function. You can use it in any way you want to invalidate the cache. We are planning to add some more advanced features that build on top of this, like window focus invalidation."),Object(a.b)("h4",{id:"polling-controls"},"Polling Controls"),Object(a.b)("p",null,"The useQuery hook has a few additional controls that allow you to control the polling behavior of the query."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"...\n  const { data, loading, error, startPolling, stopPolling } = useQuery(query [, options)];\n...\n")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"startPolling")," starts the polling of the query of it is not currently started."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"stopPolling")," stops the polling of the query of it is not currently stopped."))}u.isMDXComponent=!0},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),u=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,h=p["".concat(i,".").concat(d)]||p[d]||b[d]||a;return n?o.a.createElement(h,c(c({ref:t},s),{},{components:n})):o.a.createElement(h,c({ref:t},s))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);